{% extends 'common/base.html' %}
{% load static %}
{% load widget_tweaks %}
{% load i18n %}

{% block header %}
<header class="fixed w-full bg-white z-50">
  <div class="border-box px-4 py-3 flex items-center justify-start">
    <a href="{% url 'home' %}" class="text-2xl font-bold text-gray-800">
      <img class='w-36' src="{% static '/common/svg/logo/without_bg_with_text_blue.svg' %}" alt='shortly logo'>
    </a>
  </div>
</header>
{% endblock %}

{% block footer %}{% endblock %}

{% block content %}
<main class="min-h-screen p-4 w-full flex items-center justify-center">

  <div class="flex flex-col w-full max-w-md gap-6">
      <div class="flex flex-col justify-center text-center">
          <h1 class="text-blue-500 text-xl sm:text-2xl font-bold">
              {% trans "My Profile" %}
          </h1>
          <p class="text-zinc-400 text-sm sm:text-base">
              {% trans "View and edit your account information" %}
          </p>
      </div>

      <div class="border rounded-xl p-4 border-zinc-200 flex flex-col items-center gap-4">

          <!-- Avatar -->
          <div class="w-24 h-24 rounded-full bg-gray-200 overflow-hidden flex items-center justify-center shadow">
              {% if user.profile.avatar %}
                  <img src="{{ user.profile.avatar.url }}" alt="{% trans 'Avatar' %}" class="w-full h-full object-cover">
              {% else %}
                  <span class="text-gray-500 text-3xl font-semibold">
                      {{ user.username|first|upper }}
                  </span>
              {% endif %}
          </div>

          <div class="text-center">
              <p class="text-lg font-semibold text-gray-800">
                  {{ user.get_full_name|default:user.username }}
              </p>
              <p class="text-zinc-500 text-sm">@{{ user.username }}</p>
              <p class="text-zinc-600 text-sm">{{ user.email }}</p>
          </div>

      </div>

      <form method="post" class="border rounded-xl flex flex-col gap-4 p-4 border-zinc-200">
          {% csrf_token %}

          {% if form.non_field_errors %}
            {% for error in form.non_field_errors %}
              <p class="text-center bg-red-100 px-4 py-2 rounded text-red-600">
                {{ error }}
              </p>
            {% endfor %}
          {% endif %}

          <div>
              <label class="block font-medium text-xs sm:text-sm mb-1">
                  {% trans "First name" %}
              </label>
              {{ form.first_name|add_class:"w-full px-3 py-2 border rounded" }}
              {% if form.first_name.errors %}
                  <p class="text-red-500 text-xs sm:text-sm mt-1">{{ form.first_name.errors }}</p>
              {% endif %}
          </div>

          <div>
              <label class="block font-medium text-xs sm:text-sm mb-1">
                  {% trans "Last name" %}
              </label>
              {{ form.last_name|add_class:"w-full px-3 py-2 border rounded" }}
              {% if form.last_name.errors %}
                  <p class="text-red-500 text-xs sm:text-sm mt-1">{{ form.last_name.errors }}</p>
              {% endif %}
          </div>

          <button type="submit"
                  class="w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition">
              {% trans "Save changes" %}
          </button>
      </form>

      <a href="{% url 'profile_delete' %}"
         class="text-center w-full py-2 px-4 rounded bg-red-500 text-white hover:bg-red-600 transition">
          {% trans "Delete my account" %}
      </a>

  </div>

</main>
{% endblock %}
